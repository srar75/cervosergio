{
    "phases": {
        "setup": {
            "nixPkgs": [
                "php82",
                "php82Extensions.pdo_mysql",
                "composer",
                "nodejs",
                "npm"
            ]
        },
        "install": {
            "cmds": [
                "mkdir -p storage/framework/sessions",
                "mkdir -p storage/framework/views",
                "mkdir -p storage/framework/cache",
                "composer install --no-dev --optimize-autoloader",
                "npm install",
                "npm run build"
            ]
        },
        "build": {
            "cmds": [
                "php artisan config:cache",
                "php artisan route:cache",
                "php artisan view:cache"
            ]
        }
    },
    "start": {
        "cmd": "php artisan serve --host=0.0.0.0 --port=$PORT"
    }
}